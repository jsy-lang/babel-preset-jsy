'use strict';

const bps_env = require('babel-preset-env').default;
const bps_stage_3 = require('babel-preset-stage-3');
const bpi_offside_js = require('babel-plugin-offside-js').default;
const bpi_dyn_import = require('babel-plugin-syntax-dynamic-import');
const bpi_class_props = require('babel-plugin-transform-class-properties');

module.exports = exports = function preset(context, opts = {}) {
  const opts_stage_3 = 'stage_3' in opts ? opts.stage_3 : !opts.no_stage_3;
  delete opts.stage_3;delete opts.no_stage_3;
  const opts_offside = opts.offside;
  delete opts.offside;

  if (!opts.targets) {
    opts.targets = { node: 'current' };
  }

  if (true === opts.targets.browser) {
    opts.targets.browser = 'last 1 versions, > 2% in US';
  }

  let presets = [],
      plugins = [];

  presets.push([bps_env, opts]);
  if (opts_stage_3) {
    presets.push([bps_stage_3]);
  }

  plugins.push([bpi_class_props]);
  plugins.push([bpi_dyn_import]);
  plugins.push([bpi_offside_js, opts_offside]);

  return { presets, plugins };
};
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uL2NvZGUvaW5kZXguanMiXSwibmFtZXMiOlsiYnBzX2VudiIsInJlcXVpcmUiLCJkZWZhdWx0IiwiYnBzX3N0YWdlXzMiLCJicGlfb2Zmc2lkZV9qcyIsImJwaV9keW5faW1wb3J0IiwiYnBpX2NsYXNzX3Byb3BzIiwibW9kdWxlIiwiZXhwb3J0cyIsInByZXNldCIsImNvbnRleHQiLCJvcHRzIiwib3B0c19zdGFnZV8zIiwic3RhZ2VfMyIsIm5vX3N0YWdlXzMiLCJvcHRzX29mZnNpZGUiLCJvZmZzaWRlIiwidGFyZ2V0cyIsIm5vZGUiLCJicm93c2VyIiwicHJlc2V0cyIsInBsdWdpbnMiLCJwdXNoIl0sIm1hcHBpbmdzIjoiOztBQUFBLE1BQU1BLFVBQVVDLFFBQVEsa0JBQVIsRUFBNEJDLE9BQTVDO0FBQ0EsTUFBTUMsY0FBY0YsUUFBUSxzQkFBUixDQUFwQjtBQUNBLE1BQU1HLGlCQUFpQkgsUUFBUSx5QkFBUixFQUFtQ0MsT0FBMUQ7QUFDQSxNQUFNRyxpQkFBaUJKLFFBQVEsb0NBQVIsQ0FBdkI7QUFDQSxNQUFNSyxrQkFBa0JMLFFBQVEseUNBQVIsQ0FBeEI7O0FBRUFNLE9BQU9DLE9BQVAsR0FBaUJBLFVBQVUsU0FBU0MsTUFBVCxDQUFnQkMsT0FBaEIsRUFBeUJDLE9BQUssRUFBOUIsRUFBa0M7QUFDM0QsUUFBTUMsZUFBZSxhQUFhRCxJQUFiLEdBQW9CQSxLQUFLRSxPQUF6QixHQUFtQyxDQUFDRixLQUFLRyxVQUE5RDtBQUNBLFNBQU9ILEtBQUtFLE9BQVosQ0FBcUIsT0FBT0YsS0FBS0csVUFBWjtBQUNyQixRQUFNQyxlQUFlSixLQUFLSyxPQUExQjtBQUNBLFNBQU9MLEtBQUtLLE9BQVo7O0FBRUEsTUFBRyxDQUFDTCxLQUFLTSxPQUFULEVBQW1CO0FBQ2pCTixTQUFLTSxPQUFMLEdBQWUsRUFBSUMsTUFBTSxTQUFWLEVBQWY7QUFBa0M7O0FBRXBDLE1BQUcsU0FBU1AsS0FBS00sT0FBTCxDQUFhRSxPQUF6QixFQUFtQztBQUNqQ1IsU0FBS00sT0FBTCxDQUFhRSxPQUFiLEdBQXVCLDZCQUF2QjtBQUFvRDs7QUFFdEQsTUFBSUMsVUFBVSxFQUFkO0FBQUEsTUFBa0JDLFVBQVUsRUFBNUI7O0FBRUFELFVBQVFFLElBQVIsQ0FBZSxDQUFDdEIsT0FBRCxFQUFVVyxJQUFWLENBQWY7QUFDQSxNQUFHQyxZQUFILEVBQWtCO0FBQ2hCUSxZQUFRRSxJQUFSLENBQWUsQ0FBQ25CLFdBQUQsQ0FBZjtBQUEyQjs7QUFFN0JrQixVQUFRQyxJQUFSLENBQWUsQ0FBQ2hCLGVBQUQsQ0FBZjtBQUNBZSxVQUFRQyxJQUFSLENBQWUsQ0FBQ2pCLGNBQUQsQ0FBZjtBQUNBZ0IsVUFBUUMsSUFBUixDQUFlLENBQUNsQixjQUFELEVBQWlCVyxZQUFqQixDQUFmOztBQUVBLFNBQU8sRUFBSUssT0FBSixFQUFhQyxPQUFiLEVBQVA7QUFBMkIsQ0F0QjdCIiwiZmlsZSI6ImluZGV4LmpzIiwic291cmNlc0NvbnRlbnQiOlsiY29uc3QgYnBzX2VudiA9IHJlcXVpcmUoJ2JhYmVsLXByZXNldC1lbnYnKS5kZWZhdWx0XG5jb25zdCBicHNfc3RhZ2VfMyA9IHJlcXVpcmUoJ2JhYmVsLXByZXNldC1zdGFnZS0zJylcbmNvbnN0IGJwaV9vZmZzaWRlX2pzID0gcmVxdWlyZSgnYmFiZWwtcGx1Z2luLW9mZnNpZGUtanMnKS5kZWZhdWx0XG5jb25zdCBicGlfZHluX2ltcG9ydCA9IHJlcXVpcmUoJ2JhYmVsLXBsdWdpbi1zeW50YXgtZHluYW1pYy1pbXBvcnQnKVxuY29uc3QgYnBpX2NsYXNzX3Byb3BzID0gcmVxdWlyZSgnYmFiZWwtcGx1Z2luLXRyYW5zZm9ybS1jbGFzcy1wcm9wZXJ0aWVzJylcblxubW9kdWxlLmV4cG9ydHMgPSBleHBvcnRzID0gZnVuY3Rpb24gcHJlc2V0KGNvbnRleHQsIG9wdHM9e30pIDo6XG4gIGNvbnN0IG9wdHNfc3RhZ2VfMyA9ICdzdGFnZV8zJyBpbiBvcHRzID8gb3B0cy5zdGFnZV8zIDogIW9wdHMubm9fc3RhZ2VfM1xuICBkZWxldGUgb3B0cy5zdGFnZV8zOyBkZWxldGUgb3B0cy5ub19zdGFnZV8zOyBcbiAgY29uc3Qgb3B0c19vZmZzaWRlID0gb3B0cy5vZmZzaWRlXG4gIGRlbGV0ZSBvcHRzLm9mZnNpZGVcblxuICBpZiAhb3B0cy50YXJnZXRzIDo6XG4gICAgb3B0cy50YXJnZXRzID0gQHt9IG5vZGU6ICdjdXJyZW50J1xuXG4gIGlmIHRydWUgPT09IG9wdHMudGFyZ2V0cy5icm93c2VyIDo6XG4gICAgb3B0cy50YXJnZXRzLmJyb3dzZXIgPSAnbGFzdCAxIHZlcnNpb25zLCA+IDIlIGluIFVTJ1xuXG4gIGxldCBwcmVzZXRzID0gW10sIHBsdWdpbnMgPSBbXVxuXG4gIHByZXNldHMucHVzaCBAIyBicHNfZW52LCBvcHRzXG4gIGlmIG9wdHNfc3RhZ2VfMyA6OlxuICAgIHByZXNldHMucHVzaCBAIyBicHNfc3RhZ2VfM1xuXG4gIHBsdWdpbnMucHVzaCBAIyBicGlfY2xhc3NfcHJvcHNcbiAgcGx1Z2lucy5wdXNoIEAjIGJwaV9keW5faW1wb3J0XG4gIHBsdWdpbnMucHVzaCBAIyBicGlfb2Zmc2lkZV9qcywgb3B0c19vZmZzaWRlXG5cbiAgcmV0dXJuIEB7fSBwcmVzZXRzLCBwbHVnaW5zXG5cbiJdfQ==