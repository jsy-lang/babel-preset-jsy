'use strict';

const bps_env = require('babel-preset-env').default;
const bps_stage_3 = require('babel-preset-stage-3');
const bpi_offside_js = require('babel-plugin-offside-js').default;
const bpi_dyn_import = require('babel-plugin-syntax-dynamic-import');
const bpi_class_props = require('babel-plugin-transform-class-properties');

preset.preset = preset.default = preset;
module.exports = exports = preset;

function preset(context, opts = {}) {
  const opts_stage_3 = 'stage_3' in opts ? opts.stage_3 : !opts.no_stage_3;
  delete opts.stage_3;delete opts.no_stage_3;
  const opts_offside = opts.offside;
  delete opts.offside;

  if (!opts.targets) {
    opts.targets = { node: 'current' };
  }

  if (true === opts.targets.browser) {
    opts.targets.browser = 'last 1 versions, > 2% in US';
  }

  let presets = [],
      plugins = [];

  presets.push([bps_env, opts]);
  if (opts_stage_3) {
    presets.push([bps_stage_3]);
  }

  plugins.push([bpi_class_props]);
  plugins.push([bpi_dyn_import]);
  plugins.push([bpi_offside_js, opts_offside]);

  return { presets, plugins };
}
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uL2NvZGUvaW5kZXguanMiXSwibmFtZXMiOlsiYnBzX2VudiIsInJlcXVpcmUiLCJkZWZhdWx0IiwiYnBzX3N0YWdlXzMiLCJicGlfb2Zmc2lkZV9qcyIsImJwaV9keW5faW1wb3J0IiwiYnBpX2NsYXNzX3Byb3BzIiwicHJlc2V0IiwibW9kdWxlIiwiZXhwb3J0cyIsImNvbnRleHQiLCJvcHRzIiwib3B0c19zdGFnZV8zIiwic3RhZ2VfMyIsIm5vX3N0YWdlXzMiLCJvcHRzX29mZnNpZGUiLCJvZmZzaWRlIiwidGFyZ2V0cyIsIm5vZGUiLCJicm93c2VyIiwicHJlc2V0cyIsInBsdWdpbnMiLCJwdXNoIl0sIm1hcHBpbmdzIjoiOztBQUFBLE1BQU1BLFVBQVVDLFFBQVEsa0JBQVIsRUFBNEJDLE9BQTVDO0FBQ0EsTUFBTUMsY0FBY0YsUUFBUSxzQkFBUixDQUFwQjtBQUNBLE1BQU1HLGlCQUFpQkgsUUFBUSx5QkFBUixFQUFtQ0MsT0FBMUQ7QUFDQSxNQUFNRyxpQkFBaUJKLFFBQVEsb0NBQVIsQ0FBdkI7QUFDQSxNQUFNSyxrQkFBa0JMLFFBQVEseUNBQVIsQ0FBeEI7O0FBRUFNLE9BQU9BLE1BQVAsR0FBZ0JBLE9BQU9MLE9BQVAsR0FBaUJLLE1BQWpDO0FBQ0FDLE9BQU9DLE9BQVAsR0FBaUJBLFVBQVVGLE1BQTNCOztBQUVBLFNBQVNBLE1BQVQsQ0FBZ0JHLE9BQWhCLEVBQXlCQyxPQUFLLEVBQTlCLEVBQWtDO0FBQ2hDLFFBQU1DLGVBQWUsYUFBYUQsSUFBYixHQUFvQkEsS0FBS0UsT0FBekIsR0FBbUMsQ0FBQ0YsS0FBS0csVUFBOUQ7QUFDQSxTQUFPSCxLQUFLRSxPQUFaLENBQXFCLE9BQU9GLEtBQUtHLFVBQVo7QUFDckIsUUFBTUMsZUFBZUosS0FBS0ssT0FBMUI7QUFDQSxTQUFPTCxLQUFLSyxPQUFaOztBQUVBLE1BQUcsQ0FBQ0wsS0FBS00sT0FBVCxFQUFtQjtBQUNqQk4sU0FBS00sT0FBTCxHQUFlLEVBQUlDLE1BQU0sU0FBVixFQUFmO0FBQWtDOztBQUVwQyxNQUFHLFNBQVNQLEtBQUtNLE9BQUwsQ0FBYUUsT0FBekIsRUFBbUM7QUFDakNSLFNBQUtNLE9BQUwsQ0FBYUUsT0FBYixHQUF1Qiw2QkFBdkI7QUFBb0Q7O0FBRXRELE1BQUlDLFVBQVUsRUFBZDtBQUFBLE1BQWtCQyxVQUFVLEVBQTVCOztBQUVBRCxVQUFRRSxJQUFSLENBQWUsQ0FBQ3RCLE9BQUQsRUFBVVcsSUFBVixDQUFmO0FBQ0EsTUFBR0MsWUFBSCxFQUFrQjtBQUNoQlEsWUFBUUUsSUFBUixDQUFlLENBQUNuQixXQUFELENBQWY7QUFBMkI7O0FBRTdCa0IsVUFBUUMsSUFBUixDQUFlLENBQUNoQixlQUFELENBQWY7QUFDQWUsVUFBUUMsSUFBUixDQUFlLENBQUNqQixjQUFELENBQWY7QUFDQWdCLFVBQVFDLElBQVIsQ0FBZSxDQUFDbEIsY0FBRCxFQUFpQlcsWUFBakIsQ0FBZjs7QUFFQSxTQUFPLEVBQUlLLE9BQUosRUFBYUMsT0FBYixFQUFQO0FBQTJCIiwiZmlsZSI6ImluZGV4LmpzIiwic291cmNlc0NvbnRlbnQiOlsiY29uc3QgYnBzX2VudiA9IHJlcXVpcmUoJ2JhYmVsLXByZXNldC1lbnYnKS5kZWZhdWx0XG5jb25zdCBicHNfc3RhZ2VfMyA9IHJlcXVpcmUoJ2JhYmVsLXByZXNldC1zdGFnZS0zJylcbmNvbnN0IGJwaV9vZmZzaWRlX2pzID0gcmVxdWlyZSgnYmFiZWwtcGx1Z2luLW9mZnNpZGUtanMnKS5kZWZhdWx0XG5jb25zdCBicGlfZHluX2ltcG9ydCA9IHJlcXVpcmUoJ2JhYmVsLXBsdWdpbi1zeW50YXgtZHluYW1pYy1pbXBvcnQnKVxuY29uc3QgYnBpX2NsYXNzX3Byb3BzID0gcmVxdWlyZSgnYmFiZWwtcGx1Z2luLXRyYW5zZm9ybS1jbGFzcy1wcm9wZXJ0aWVzJylcblxucHJlc2V0LnByZXNldCA9IHByZXNldC5kZWZhdWx0ID0gcHJlc2V0XG5tb2R1bGUuZXhwb3J0cyA9IGV4cG9ydHMgPSBwcmVzZXRcblxuZnVuY3Rpb24gcHJlc2V0KGNvbnRleHQsIG9wdHM9e30pIDo6XG4gIGNvbnN0IG9wdHNfc3RhZ2VfMyA9ICdzdGFnZV8zJyBpbiBvcHRzID8gb3B0cy5zdGFnZV8zIDogIW9wdHMubm9fc3RhZ2VfM1xuICBkZWxldGUgb3B0cy5zdGFnZV8zOyBkZWxldGUgb3B0cy5ub19zdGFnZV8zOyBcbiAgY29uc3Qgb3B0c19vZmZzaWRlID0gb3B0cy5vZmZzaWRlXG4gIGRlbGV0ZSBvcHRzLm9mZnNpZGVcblxuICBpZiAhb3B0cy50YXJnZXRzIDo6XG4gICAgb3B0cy50YXJnZXRzID0gQHt9IG5vZGU6ICdjdXJyZW50J1xuXG4gIGlmIHRydWUgPT09IG9wdHMudGFyZ2V0cy5icm93c2VyIDo6XG4gICAgb3B0cy50YXJnZXRzLmJyb3dzZXIgPSAnbGFzdCAxIHZlcnNpb25zLCA+IDIlIGluIFVTJ1xuXG4gIGxldCBwcmVzZXRzID0gW10sIHBsdWdpbnMgPSBbXVxuXG4gIHByZXNldHMucHVzaCBAIyBicHNfZW52LCBvcHRzXG4gIGlmIG9wdHNfc3RhZ2VfMyA6OlxuICAgIHByZXNldHMucHVzaCBAIyBicHNfc3RhZ2VfM1xuXG4gIHBsdWdpbnMucHVzaCBAIyBicGlfY2xhc3NfcHJvcHNcbiAgcGx1Z2lucy5wdXNoIEAjIGJwaV9keW5faW1wb3J0XG4gIHBsdWdpbnMucHVzaCBAIyBicGlfb2Zmc2lkZV9qcywgb3B0c19vZmZzaWRlXG5cbiAgcmV0dXJuIEB7fSBwcmVzZXRzLCBwbHVnaW5zXG5cbiJdfQ==